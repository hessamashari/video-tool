#!/bin/bash

	# v0.1 --(20180815) add reduce_video_size function
	# v0.2 --(20180816) add convert_video_format function
	# v0.3 --(20180816) add show_version and uninstall function
	# v0.4 --(20180816) add update function and installer script
	# v0.5 --(20180828) add src and src/main directories and move functions to them

####################################################
#                 Video_Tool V0.5                  #
#  https://github.com/hessamashari/video-tool.git  #
####################################################

	# author : Hessam Ashari
	# gitlab : https://gitlab.com/hessam.ashari/video-tool
	# github : https://github.com/hessamashari/video-tool
	# Email  : hessam.ashari@gmail.com

normal="$(printf '\033[0m')"          # text mode
# Colors
red="$(printf '\033[0;31m')"  		  # red
green="$(printf '\033[0;32m')"        # green
orange="$(printf '\033[0;33m')"       # orange
blue="$(printf '\033[0;34m')"         # blue
white="$(printf '\033[0;37m')"        # white

# Import functions
source src/main/select.sh
source src/main/update.sh 
source src/main/uninstall.sh 

# ----------\Main function\----------
function main() {
	clear

	echo -e "ُ${red}+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+${normal}"
	read -p "${green}What can I do for you ???${normal}
	1)${orange} Reduce video size.${normal}
	2)${orange} Convert the video format.${normal}

	Enter the number of the option that you selected : " selectedItem
	echo -e "ُ${red}+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+${normal}"
	if [[ "$selectedItem" -gt "0" && "$selectedItem" -lt "3" ]]; then
		select_video_path
	else
		echo -e "${red}Invalid argument!${normal}"
		exit 1
	fi
}

# ----------\Show version function\---------
function show_version() {
	echo -e "\n"
	echo -e "Video_Tool, version v0.5 (x86_64-unknown-linux-gnu)
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

built with bash 4.4.23 (GNU/bash)"
	return
}

# ----------\Show help function\----------
function usage() {
	echo "\n"
	echo -e " Usage: video-tool [ -h | --help ],  [ -V | --version ], [ --uninstall ],   [ -U | --update ]"
	return
}

# ----------\Input options\----------
case "$1" in
    "")    main    ;;
    "--update" | "-U")    update    ;;
	"--uninstall")    uninstall    ;;
	"--help" | "-h")    usage    ;;
	"--version" | "-V")    show_version    ;;
	*)    usage    ;;
esac;
exit 0
